# 지역변수의 범위를 최소화하라

지역변수의 유효 범위를 최소로 줄이면 코드 가독성과 유지보수성이 높아지고, 오류 가능성은 낮아진다.

## 가장 처음 쓰일 때 선언하기

지역변수의 범위를 줄이는 가장 강력한 기법은 '가장 처음 쓰일 때 선언하기'이다.
- 지역변수를 미리 선언해두면 가독성이 떨어질 수 있다.
- 블록 바깥에 선언된 변수는 그 블록이 끝난 뒤까지 살아 남아서, 실수로 의도한 범위 앞 혹은 뒤에서 그 변수를 사용하면 끔찍한 결과로 이어질 수 있다.


## 선언과 동시에 초기화하라

- 거의 모든 지역변수는 선언과 동시에 초기화해야 한다.<br>
	초기화에 필요한 정보가 충분하지 않다면 충분해질 때까지 선언을 미룬다.

- 변수를 초기화하는 표현식에서 검사 예외를 던질 가능성이 있다면 try 블록 안에서 초기화해야 한다.<br>
	변수 값을 try 블록 바깥에서도 사용해야 한다면, try 블록 앞에서 선언해야 한다.

## 반복문

- 반복 변수의 값을 반복문이 종료된 뒤에도 써야 하는 경우가 아니라면 while문 보다 for문이 낫다.

```java
// 컬렉션이나 배열을 순회하는 권장 관용구
for (Element e : c) {
  // e로 무언가를 한다.
}
```

반복자를 사용해야 하는 상황이면 for-each문 대신 전통적인 for 문을 쓰는 것이 낫다.

```java
for (Iterator<Element> i = c.iterator(); i.hasNext();) {
  Element e = i.next();
  ...	//e와 i로 무언가를 한다.
}
```

- while문 보다 for문이 나은 예

```java
Iterator<Element> i = c.iterator();
while (i.hasNext()) {
  doSomething(i.next());
}

Iterator<Element> i2 = c2.iterator();
while (i.hasNext()) {			//버그 (i2 대신 i를 사용함.)
  doSomething(i2.next());
}
```

i의 유효범위가 끝나지 않아서 두 번째 while문에서 실수를 저지를 수 있다.(컴파일 타임에 잡아주지 못함)

- for문을 사용하면 이러한 오류를 컴파일 타임에 잡아준다.
- 뿐만 아니라 똑같은 이름의 변수를 여러 반복문에서 써도 유효범위가 for문 범위와 일치하여 영향을 주지 않는다.
- while문보다 짧아서 가독성이 좋다.


## 지역범위를 최소화 시키는 관용구

```java
for (int i = 0, n = expensiveComputation(); i < n; i++) {
	...i로 무언가를 한다.
}
```

반복 여부를 결정짓는 i의 한계값을 n에 저장시켜 n을 다시 계산하는 비용을 줄여준다.


## 메서드를 작게 하고 한가지 기능에 집중

메서드를 작게 유지하고 한 가지 기능에 집중하는 것도 지역변수 범위를 최소화하는 방법이다.
